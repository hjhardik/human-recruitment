(this["webpackJsonpreact-thesis"]=this["webpackJsonpreact-thesis"]||[]).push([[0],{110:function(e,t,n){},216:function(e,t,n){},218:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(60),s=n.n(r),o=n(16),i=n(9),l=(n(110),n(0)),u=function(e){e.isAuth;var t=e.setToken,n=Object(i.f)();return Object(l.jsxs)("div",{className:"container header",children:[Object(l.jsx)("div",{className:"header-center",children:"Human Recruitment Signing Platform"}),Object(l.jsx)("button",{className:"btn btn-light",onClick:function(){localStorage.clear(),t({token:!1,user:!1,candidate:!1,company:!1}),n.push("/login")},children:"Logout"})]})},j=function(){return Object(l.jsxs)("footer",{children:[Object(l.jsx)("hr",{}),Object(l.jsx)("p",{children:"Copyright \xa9 2021"}),Object(l.jsx)("p",{children:"Designed & developed by Hardik"})]})},b=n(3),d=n.n(b),O=n(4),p=n(6),x="https://guarded-garden-69104.herokuapp.com";function h(e){return f.apply(this,arguments)}function f(){return(f=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(x,"/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var m=function(e){var t=e.setToken,n=Object(i.f)(),a=Object(c.useState)(null),r=Object(O.a)(a,2),s=r[0],u=r[1],j=Object(c.useState)(""),b=Object(O.a)(j,2),x=b[0],f=b[1],m=Object(c.useState)(""),v=Object(O.a)(m,2),g=v[0],y=v[1],C=Object(c.useState)(""),N=Object(O.a)(C,2),k=N[0],S=N[1],w=Object(c.useState)(""),E=Object(O.a)(w,2),P=E[0],T=E[1],I=Object(c.useState)(""),A=Object(O.a)(I,2),D=A[0],B=A[1],R=Object(c.useState)(!0),L=Object(O.a)(R,2),F=L[0],J=L[1],U=Object(c.useState)(!1),_=Object(O.a)(U,2),M=_[0],H=_[1],Y=function(){s&&u(null),J(!0),H(!1)},V=function(){s&&u(null),J(!1),H(!0)},G=function(){var e=Object(p.a)(d.a.mark((function e(c){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),x&&P&&D&&k){e.next=4;break}return u("Please fill all fields"),e.abrupt("return");case 4:if(P===D){e.next=7;break}return u("Password and confirm password do not match"),e.abrupt("return");case 7:if(!F||""!==g){e.next=10;break}return u("Enter full name"),e.abrupt("return");case 10:return e.next=12,h({userName:x,fullName:g,password:P,companyName:k,candidate:F});case 12:(a=e.sent).success?(t(a),Y(),V(),f(""),y(""),T(""),S(""),B(""),n.push("/dashboard")):u(a.msg);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("br",{}),s&&Object(l.jsxs)("h4",{className:"error",children:[" ",s," "]}),Object(l.jsxs)("form",{className:"add-form",onSubmit:function(e){return G(e)},children:[Object(l.jsx)("h3",{className:"login-header",children:"Register New Account"}),Object(l.jsx)("br",{}),Object(l.jsxs)("div",{className:"form-control form-control-check",children:[Object(l.jsx)("label",{children:"You are a "}),Object(l.jsx)("br",{}),Object(l.jsx)("input",{type:"radio",name:"role",value:"candidate",defaultChecked:F,onClick:Y}),Object(l.jsx)("label",{children:"  Candidate"}),Object(l.jsx)("br",{}),Object(l.jsx)("input",{type:"radio",name:"role",value:"company",defaultChecked:M,onClick:V}),Object(l.jsx)("label",{children:"  Company"}),Object(l.jsx)("br",{})]}),F?Object(l.jsxs)("div",{children:[Object(l.jsxs)("div",{className:"form-control",children:[Object(l.jsx)("label",{children:"Full Name"}),Object(l.jsx)("br",{}),Object(l.jsx)("input",{type:"text",placeholder:"Enter Name",value:g,onChange:function(e){y(e.target.value),s&&u(null)}})]}),Object(l.jsxs)("div",{className:"form-control",children:[Object(l.jsx)("label",{children:"User Name"}),Object(l.jsx)("br",{}),Object(l.jsx)("input",{type:"text",placeholder:"Enter User Name",value:x,onChange:function(e){f(e.target.value),s&&u(null)}})]}),Object(l.jsxs)("div",{className:"form-control",children:[Object(l.jsx)("label",{children:"Password"}),Object(l.jsx)("br",{}),Object(l.jsx)("input",{type:"password",placeholder:"Enter Password",value:P,onChange:function(e){T(e.target.value),s&&u(null)}})]}),Object(l.jsxs)("div",{className:"form-control",children:[Object(l.jsx)("label",{children:"Confirm Password"}),Object(l.jsx)("br",{}),Object(l.jsx)("input",{type:"password",placeholder:"Confirm Password",value:D,onChange:function(e){B(e.target.value),s&&u(null)}})]}),Object(l.jsxs)("div",{className:"form-control",children:[Object(l.jsx)("label",{children:"Enter Company Name"}),Object(l.jsx)("br",{}),Object(l.jsx)("input",{type:"text",placeholder:"Enter Company Name",value:k,onChange:function(e){S(e.target.value),s&&u(null)}})]})]}):Object(l.jsxs)("div",{children:[Object(l.jsxs)("div",{className:"form-control",children:[Object(l.jsx)("label",{children:"Enter Company Name"}),Object(l.jsx)("br",{}),Object(l.jsx)("input",{type:"text",placeholder:"Enter Company Name",value:k,onChange:function(e){S(e.target.value),s&&u(null)}})]}),Object(l.jsxs)("div",{className:"form-control",children:[Object(l.jsx)("label",{children:"User Name"}),Object(l.jsx)("br",{}),Object(l.jsx)("input",{type:"text",placeholder:"Enter User Name",value:x,onChange:function(e){f(e.target.value),s&&u(null)}})]}),Object(l.jsxs)("div",{className:"form-control",children:[Object(l.jsx)("label",{children:"Password"}),Object(l.jsx)("br",{}),Object(l.jsx)("input",{type:"password",placeholder:"Enter Password",value:P,onChange:function(e){T(e.target.value),s&&u(null)}})]}),Object(l.jsxs)("div",{className:"form-control",children:[Object(l.jsx)("label",{children:"Confirm Password"}),Object(l.jsx)("br",{}),Object(l.jsx)("input",{type:"password",placeholder:"Confirm Password",value:D,onChange:function(e){B(e.target.value),s&&u(null)}})]})]}),Object(l.jsx)("br",{}),Object(l.jsx)("input",{type:"submit",value:"REGISTER",className:"btn btn-block"})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("p",{children:"Already Registered ?"}),Object(l.jsx)(o.b,{to:"/login",children:"Login"})]})]})};function v(e){return g.apply(this,arguments)}function g(){return(g=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x,"/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var y=function(e){var t=e.setToken,n=Object(i.f)(),a=Object(c.useState)(null),r=Object(O.a)(a,2),s=r[0],u=r[1],j=Object(c.useState)(""),b=Object(O.a)(j,2),x=b[0],h=b[1],f=Object(c.useState)(""),m=Object(O.a)(f,2),g=m[0],y=m[1],C=Object(c.useState)(!0),N=Object(O.a)(C,2),k=N[0],S=N[1],w=Object(c.useState)(!1),E=Object(O.a)(w,2),P=E[0],T=E[1],I=function(){var e=Object(p.a)(d.a.mark((function e(c){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),x&&g){e.next=4;break}return u("Please fill out all fields"),e.abrupt("return");case 4:return e.next=6,v({userName:x,password:g,candidate:k});case 6:(a=e.sent).success?(t(a),h(""),y(""),S(!0),T(!1),n.push("/dashboard")):u(a.msg);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("br",{}),s&&Object(l.jsxs)("h4",{className:"error",children:[" ",s," "]}),Object(l.jsxs)("form",{className:"add-form",onSubmit:I,children:[Object(l.jsx)("h3",{className:"login-header",children:"Log In to your Account"}),Object(l.jsx)("br",{}),Object(l.jsxs)("div",{children:[Object(l.jsxs)("div",{className:"form-control",children:[Object(l.jsx)("label",{children:"User Name"}),Object(l.jsx)("br",{}),Object(l.jsx)("input",{type:"text",placeholder:"Enter User Name",value:x,onChange:function(e){h(e.target.value),s&&u(null)}})]}),Object(l.jsxs)("div",{className:"form-control",children:[Object(l.jsx)("label",{children:"Password"}),Object(l.jsx)("br",{}),Object(l.jsx)("input",{type:"password",placeholder:"Enter Password",value:g,onChange:function(e){y(e.target.value),s&&u(null)}})]}),Object(l.jsxs)("div",{className:"form-control form-control-check",children:[Object(l.jsx)("label",{children:"You are a "}),Object(l.jsx)("br",{}),Object(l.jsx)("input",{type:"radio",name:"role",value:"candidate",defaultChecked:k,onClick:function(e){s&&u(null),S(!0),T(!1)}}),Object(l.jsx)("label",{children:" Candidate"}),Object(l.jsx)("br",{}),Object(l.jsx)("input",{type:"radio",name:"role",value:"company",defaultChecked:P,onClick:function(e){s&&u(null),S(!1),T(!0)}}),Object(l.jsx)("label",{children:" Company"}),Object(l.jsx)("br",{})]})]}),Object(l.jsx)("br",{}),Object(l.jsx)("input",{type:"submit",value:"LOG IN",className:"btn btn-block"})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("p",{children:"New User ?"}),Object(l.jsx)(o.b,{to:"/register",children:"Register New User"})]})]})},C=n(63),N=n(103),k=function(e){var t=e.isAuth,n=e.candidate,c=e.Component,a=Object(N.a)(e,["isAuth","candidate","Component"]),r=Object(i.f)();return Object(l.jsx)("div",{children:Object(l.jsx)(i.b,Object(C.a)(Object(C.a)({},a),{},{render:function(e){if(t)return!1===n&&"true"===localStorage.getItem("candidate")&&r.push("/dashboard"),Object(l.jsx)(c,{});r.push("/login")}}))})},S=n(12),w=function(e){return Object(l.jsx)("button",{className:e.class,type:e.btnType,style:{backgroundColor:e.color},onClick:e.onClick,children:e.text})},E=function(){var e=Object(p.a)(d.a.mark((function e(t,n,c,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x,"/modifystatus/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({creator:t,candidate:n,contract:c,status:a})}).then((function(e){return e.json()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,c,a){return e.apply(this,arguments)}}(),P=function(e){var t=e.content,n=e.id,a=e.onDelete,r=Object(i.f)(),s=Object(c.useState)(t),u=Object(O.a)(s,2),j=u[0],b=u[1],x=Object(c.useState)(j.status),h=Object(O.a)(x,2),f=h[0],m=h[1];Object(c.useEffect)((function(){b(t),m(t.status)}),[t,n]);var v=function(){var e=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(j.creator,j.candidateName,j.contractName,10);case 2:e.sent.success&&a(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(p.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=7;break}return e.next=3,E(j.creator,j.candidateName,j.contractName,4);case 3:e.sent.success&&m(4),e.next=11;break;case 7:return e.next=9,E(j.creator,j.candidateName,j.contractName,f+1);case 9:e.sent.success&&m(f+1);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){var e=Object(p.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=7;break}return e.next=3,E(j.creator,j.candidateName,j.contractName,2);case 3:e.sent.success&&m(2),e.next=11;break;case 7:return e.next=9,E(j.creator,j.candidateName,j.contractName,f-1);case 9:e.sent.success&&m(f-1);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),C=function(){var e=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(j.creator,j.candidateName,j.contractName,1);case 2:e.sent.success&&m(f+1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(p.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t?window.open("/signcontract/".concat(j.candidateName,"/").concat(j.contractName),"_blank"):console.log("Sign clicked by candidate");case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:Object(l.jsx)(o.b,{to:"/viewcontract/".concat(j.candidateName,"/").concat(j.contractName),children:j.contractName.toUpperCase()})}),Object(l.jsx)("td",{children:j.company}),Object(l.jsx)("td",{children:j.candidateName}),Object(l.jsx)("td",{children:Object(l.jsxs)(l.Fragment,{children:[0===f&&"DRAFT",1===f&&"FINALIZED",2===f&&"APPROVED BY CANDIDATE",3===f&&"APPROVED BY COMPANY",4===f&&"APPROVED",5===f&&"SIGNED"]})}),Object(l.jsx)("td",{children:Object(l.jsxs)(l.Fragment,{children:["false"===localStorage.getItem("candidate")&&0===f&&Object(l.jsx)(w,{class:"tableButton btn btn-dark",text:"Edit",onClick:function(){r.push({pathname:"/editContract/".concat(j.candidateName,"/").concat(j.contractName),state:{data:j.draftContent}})}}),"false"===localStorage.getItem("candidate")&&0===f&&Object(l.jsx)(w,{class:"tableButton btn btn-primary",text:"Finalize",onClick:function(){return C(n)}}),"true"===localStorage.getItem("candidate")&&1===f&&Object(l.jsx)(w,{class:"tableButton btn btn-success",text:"APPROVE BY CANDIDATE",onClick:function(){return g(!1,n)}}),"false"===localStorage.getItem("candidate")&&1===f&&"Waiting for candidate to approve. Check comments/annotations in contract viewer.","false"===localStorage.getItem("candidate")&&2===f&&Object(l.jsx)(w,{class:"tableButton btn btn-success",text:"APPROVE BY COMPANY",onClick:function(){return g(!0,n)}}),"true"===localStorage.getItem("candidate")&&2===f&&"Waiting for company to approve. Check comments/annotations in contract viewer.",f>=2&&f<=4&&"true"===localStorage.getItem("candidate")&&Object(l.jsx)(w,{class:"tableButton btn btn-outline-danger",text:"CANCEL APPROVAL",onClick:function(){return y(!1,n)}}),(3===f||4===f)&&"false"===localStorage.getItem("candidate")&&Object(l.jsx)(w,{class:"tableButton btn btn-outline-danger",text:"CANCEL APPROVAL",onClick:function(){return y(!0,n)}}),"true"===localStorage.getItem("candidate")&&4===f&&Object(l.jsx)(w,{class:"tableButton btn btn-success",text:"SIGN",onClick:function(){return N(!1,n)}}),"false"===localStorage.getItem("candidate")&&4===f&&Object(l.jsx)(w,{class:"tableButton btn btn-success",text:"SIGN",onClick:function(){return N(!0,n)}}),"false"===localStorage.getItem("candidate")&&0===f&&Object(l.jsx)(w,{class:"tableButton btn btn-danger",text:"Delete",onClick:function(){return v(j._id)}}),6===f&&Object(l.jsx)(w,{text:"CONTRACT ESTABLISHED",color:"pink"})]})})]})},T=function(e){var t=e.contracts,n=e.onDelete,r=Object(c.useState)(t),s=Object(O.a)(r,2),o=s[0],i=s[1];return Object(c.useEffect)((function(){i(t)}),[t]),Object(l.jsx)(a.a.Fragment,{children:o.map((function(e,t){return Object(l.jsx)(P,{content:e,id:t,onDelete:n},t)}))})},I=n(8),A=n(104),D=(n(215),n(216),n(105)),B=a.a.forwardRef,R=a.a.useImperativeHandle,L=B((function(e,t){var n=Object(c.useState)((function(){if(void 0!==e.initialText){var t=Object(I.convertFromHTML)(e.initialText),n=I.ContentState.createFromBlockArray(t.contentBlocks,t.entityMap);return I.EditorState.createWithContent(n)}I.EditorState.createEmpty()})),a=Object(O.a)(n,2),r=a[0],s=a[1];return R(t,(function(){return{convertContentToHTML:function(){return Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(D.a)(r.getCurrentContent()),e.abrupt("return",t);case 2:case"end":return e.stop()}}),e)})))()}}})),Object(l.jsxs)("div",{className:"TextEditor",children:[Object(l.jsx)("header",{className:"Editor-header",children:"Edit Contract Text"}),Object(l.jsx)(A.Editor,{editorState:r,onEditorStateChange:function(e){s(e)},wrapperClassName:"wrapper-class",editorClassName:"editor-class",toolbarClassName:"toolbar-class"})]})})),F=a.a.useRef,J=function(){var e=Object(p.a)(d.a.mark((function e(t){var n,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.subRoute,c=t.sendData,e.next=3,fetch("".concat(x,"/").concat(n),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}).then((function(e){return e.json()}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(e){var t=e.user,n=e.company,r=e.addContract,s=e.toggle,o=F(),i=Object(c.useState)(""),u=Object(O.a)(i,2),j=u[0],b=u[1],x=Object(c.useState)([]),h=Object(O.a)(x,2),f=h[0],m=h[1],v=Object(c.useState)(""),g=Object(O.a)(v,2),y=g[0],C=g[1],N=Object(c.useState)([]),k=Object(O.a)(N,2),E=k[0],P=k[1];Object(c.useEffect)((function(){(function(){var e=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J({subRoute:"findCompanyMembers",sendData:{company:n}});case 2:t=e.sent,console.log("candidates",t),t&&m(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var T=function(){var e=Object(p.a)(d.a.mark((function e(c){var a,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),0!==f.length){e.next=4;break}return b("There are no candidates from your company"),e.abrupt("return");case 4:if(0!==E.length&&""!==y){e.next=9;break}return b("Please fill out all fields"),e.abrupt("return");case 9:return j&&b(null),e.next=12,o.current.convertContentToHTML();case 12:return a=e.sent,e.next=15,J({subRoute:"createDraft",sendData:{user:t,company:n,contractName:y,selectedMembers:E,draftContent:a}});case 15:i=e.sent,console.log(i),i.success?(P([]),C(""),s(!1),r(i.newContracts)):b(i.msg);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("br",{}),j&&Object(l.jsxs)("h4",{className:"error",children:[" ",j," "]}),Object(l.jsx)("br",{}),Object(l.jsx)("div",{className:"create-draft-form",children:Object(l.jsxs)("form",{onSubmit:function(e){return T(e)},children:[Object(l.jsx)("label",{children:"Select the members of your company for this contract"}),Object(l.jsx)("div",{className:"form-control",children:f.map((function(e,t){return Object(l.jsxs)(a.a.Fragment,{children:[Object(l.jsx)("input",{type:"checkbox",name:"member".concat(t),value:e,onChange:function(e){var t,n;t=e.currentTarget.value,n=e.currentTarget.checked,P(n?[].concat(Object(S.a)(E),[t]):E.filter((function(e){return e!==t}))),j&&b(null)}}),Object(l.jsx)("label",{htmlFor:t,children:e}),Object(l.jsx)("br",{})]},t)}))}),Object(l.jsx)("br",{}),Object(l.jsxs)("div",{className:"form-control",children:[Object(l.jsx)("label",{children:"Name of Contract"}),Object(l.jsx)("br",{}),Object(l.jsx)("input",{type:"text",placeholder:"Enter contract name",value:y,onChange:function(e){C(e.target.value),j&&b(null)}})]}),Object(l.jsx)("br",{}),Object(l.jsx)(L,{ref:o}),Object(l.jsx)("br",{}),Object(l.jsx)("div",{className:"create-draft-buttons",children:Object(l.jsxs)("div",{children:[Object(l.jsx)(w,{class:"btn btn-primary",btnType:"submit",text:"Initiate Contract"}),Object(l.jsx)(w,{class:"btn btn-danger",onClick:function(e){!function(e){e.preventDefault(),j&&b(null),P([]),C(""),s(!1)}(e),j&&b(null)},text:"Cancel",color:"red"})]})})]})})]})},_=function(){var e=Object(p.a)(d.a.mark((function e(t,n,c){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x,"/contracts/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:t,company:n,candidate:c})}).then((function(e){return e.json()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),M=function(){var e,t,n=Object(c.useState)([]),a=Object(O.a)(n,2),r=a[0],s=a[1],o=Object(c.useState)(!1),i=Object(O.a)(o,2),u=i[0],j=i[1],b=Object(c.useState)(!1),x=Object(O.a)(b,2),h=x[0],f=x[1];e=localStorage.getItem("user"),t=localStorage.getItem("company"),Object(c.useEffect)((function(){h&&function(){var e=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(localStorage.getItem("user"),localStorage.getItem("company"),localStorage.getItem("candidate"));case 2:t=e.sent,s(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),h||f(!0)}),[h]);return Object(l.jsxs)("div",{children:["false"===localStorage.getItem("candidate")&&Object(l.jsxs)("div",{children:[Object(l.jsx)(w,{class:"btn btn-primary btn-lg btn-block initiateDraftButton",text:"Initiate New Draft",color:"green",onClick:function(){j(!0)}}),u&&Object(l.jsx)(U,{addContract:function(e){console.log("contracts:",r),console.log("new contracts: ",e),s(null!==r?[].concat(Object(S.a)(e),Object(S.a)(r)):Object(S.a)(e))},toggle:j,user:e,company:t})]}),Object(l.jsx)("hr",{}),Object(l.jsx)("div",{className:"contracts-table",children:Object(l.jsxs)("table",{className:"table table-striped",children:[Object(l.jsx)("thead",{className:"thead-light",children:Object(l.jsxs)("tr",{children:[Object(l.jsxs)("th",{children:["Name ",Object(l.jsx)("br",{}),"(Click to View)"]}),Object(l.jsx)("th",{children:"Company"}),Object(l.jsx)("th",{children:"Associated Candidate"}),Object(l.jsx)("th",{children:"Status"}),Object(l.jsx)("th",{children:"Actions Available"})]})}),Object(l.jsx)("tbody",{children:r.length>0?Object(l.jsx)(T,{contracts:r,onDelete:function(e){console.log("id deletion called on",e),s(r.filter((function(t){return t._id!==e})))}}):"You have not created any contracts yet."})]})})]})},H=function(){var e=Object(c.useState)(function(){var e=localStorage.getItem("token");return"false"===e?null:e}()),t=Object(O.a)(e,2),n=t[0],a=t[1];return{setToken:function(e){var t=e.token,n=e.user,c=e.candidate,r=e.company;localStorage.setItem("token",t),localStorage.setItem("user",n),localStorage.setItem("candidate",c),localStorage.setItem("company",r),a(t)},token:n}},Y=function(){var e=Object(i.h)(),t=e.candidate,n=e.contract,a=Object(c.useState)(""),r=Object(O.a)(a,2),s=r[0],o=r[1],u=function(){var e=Object(p.a)(d.a.mark((function e(){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(x,"/finddraftcontent/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({candidate:t,contract:n})}).then((function(e){return e.json()}));case 2:return c=e.sent,e.abrupt("return",c.content);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return setInterval(Object(p.a)(d.a.mark((function e(){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(t,n);case 2:null!==(c=e.sent)&&0!==c.localeCompare(s)&&o(c);case 4:case"end":return e.stop()}}),e)}))),4e3),Object(c.useEffect)((function(){var e=document.createElement("script");e.src="https://documentcloud.adobe.com/view-sdk/main.js",e.async=!0,e.type="text/javascript";var t=document.createElement("script");return t.src="/adobeview.js",t.async=!0,t.type="text/javascript",document.body.appendChild(e),document.body.appendChild(t),function(){document.body.removeChild(e),document.body.removeChild(t)}}),[s]),Object(l.jsx)("div",{id:"pdfviewercontainer",candidate:"".concat(t),contract:"".concat(n),children:Object(l.jsx)("div",{id:"adobe-dc-view"})})},V=a.a.useRef,G=function(e){var t=V(),n=Object(i.f)(),a=Object(c.useState)(""),r=Object(O.a)(a,2),s=r[0],o=r[1],u=localStorage.getItem("user"),j=localStorage.getItem("company"),b=Object(i.h)(),h=b.candidate,f=b.contract,m=Object(i.g)().state,v=function(){var e=Object(p.a)(d.a.mark((function e(){var c,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(null),e.next=3,t.current.convertContentToHTML();case 3:return c=e.sent,e.next=6,fetch("".concat(x,"/editcontract/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({creator:u,candidate:h,company:j,contract:f,draftContent:c})}).then((function(e){return e.json()}));case 6:(a=e.sent).success?n.goBack():o(a.msg);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(p.a)(d.a.mark((function e(t){var c,a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o(null),0!==t){e.next=6;break}c=document.getElementById("deleteSP").value,a=document.getElementById("deleteEP").value,e.next=12;break;case 6:return e.next=8,document.getElementById("reorderSP").value;case 8:return c=e.sent,e.next=11,document.getElementById("reorderEP").value;case 11:a=e.sent;case 12:return e.next=14,fetch("".concat(x,"/editcontract/reorderDelete"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({candidate:h,contract:f,SP:c,EP:a,id:t})}).then((function(e){return e.json()}));case 14:r=e.sent,console.log(r),r.success?n.goBack():o(r.msg);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){o(null),n.goBack()};return Object(l.jsxs)("div",{children:[Object(l.jsx)("br",{}),s&&Object(l.jsxs)("h4",{className:"error",children:[" ",s," "]}),Object(l.jsx)("br",{}),Object(l.jsx)(w,{class:"btn btn-danger",text:"Back to Dashboard",onClick:y}),Object(l.jsx)("br",{}),Object(l.jsx)("br",{}),Object(l.jsxs)("div",{className:"edit-contract form-control",children:[Object(l.jsx)(L,{initialText:void 0===m?"":m.data,ref:t}),Object(l.jsxs)("div",{className:"button-grp",children:[Object(l.jsx)(w,{class:"btn btn-success",text:"Save Changes",onClick:v}),Object(l.jsx)(w,{class:"btn btn-danger",text:"Cancel",onClick:y})]})]}),Object(l.jsxs)("div",{className:"edit-contract-form",children:[Object(l.jsxs)("div",{className:"form-control",children:[Object(l.jsx)("h4",{children:"Delete Pages"}),Object(l.jsx)("input",{type:"number",id:"deleteSP",min:1,max:10}),Object(l.jsx)("label",{children:"Enter starting page"}),Object(l.jsx)("br",{}),Object(l.jsx)("input",{type:"number",id:"deleteEP",min:1,max:10}),Object(l.jsx)("label",{children:"Enter ending page"}),Object(l.jsx)("br",{}),Object(l.jsxs)("div",{className:"button-grp",children:[Object(l.jsx)(w,{class:"btn btn-success",text:"Delete Pages",onClick:function(){return g(0)}}),Object(l.jsx)(w,{class:"btn btn-danger",text:"Cancel",onClick:y})]})]}),Object(l.jsx)("div",{children:Object(l.jsxs)("div",{className:"form-control",children:[Object(l.jsx)("h4",{children:"Reorder Pages"}),Object(l.jsx)("input",{type:"number",id:"reorderSP",min:1,max:10}),Object(l.jsx)("label",{children:"Enter starting page"}),Object(l.jsx)("br",{}),Object(l.jsx)("input",{type:"number",id:"reorderEP",min:1,max:10}),Object(l.jsx)("label",{children:"Enter ending page"}),Object(l.jsx)("br",{}),Object(l.jsxs)("div",{className:"button-grp",children:[Object(l.jsx)(w,{class:"btn btn-success",text:"Reorder Pages",onClick:function(){return g(1)}}),Object(l.jsx)(w,{class:"btn btn-danger",text:"Cancel",onClick:y})]})]})})]})]})},z=function(){var e=Object(c.useState)(null),t=Object(O.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)("OAUTH IN PROGRESS..."),s=Object(O.a)(r,2),o=s[0],u=(s[1],Object(c.useState)(!0)),j=Object(O.a)(u,2),b=j[0],d=j[1],p=Object(c.useState)(""),h=Object(O.a)(p,2),f=h[0],m=h[1],v=Object(i.h)(),g=v.contract,y=v.candidate,C=v.code,N=v.api_access_point,k=v.web_access_point;return Object(l.jsxs)("div",{className:"jumbotron",children:[n&&Object(l.jsxs)("h4",{className:"error",children:[" ",n," "]}),b&&Object(l.jsxs)("div",{children:[Object(l.jsx)("input",{type:"email",placeholder:"Enter Recipient Email",value:f,onChange:function(e){m(e.target.value),a(null)}}),Object(l.jsx)(w,{text:"SUBMIT",class:"btn btn-success",onClick:function(){/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(f).toLowerCase())?(a(null),d(!1),fetch("".concat(x,"/signauth/redirect"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contract:g,candidate:y,email:f,code:C,api_access_point:N,web_access_point:k})})):a("Please enter valid Email Id")}})]}),Object(l.jsx)("h3",{children:o})]})};var W=function(){var e=H(),t=e.token,n=e.setToken;return console.log("token is",t),Object(l.jsxs)(o.a,{children:[Object(l.jsx)(i.b,{exact:!0,path:"/",children:Object(l.jsx)(i.a,{to:"/login"})}),Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)(u,{isAuth:t,setToken:n}),Object(l.jsx)(i.b,{exact:!0,path:"/login",children:t?Object(l.jsx)(i.a,{to:"/dashboard"}):Object(l.jsx)(y,{setToken:n})}),Object(l.jsx)(i.b,{exact:!0,path:"/register",children:t?Object(l.jsx)(i.a,{to:"/dashboard"}):Object(l.jsx)(m,{setToken:n})}),Object(l.jsx)(k,{exact:!0,path:"/dashboard",Component:M,isAuth:t}),Object(l.jsx)(k,{path:"/viewcontract/:candidate/:contract",Component:Y,isAuth:t}),Object(l.jsx)(k,{path:"/editcontract/:candidate/:contract",Component:G,isAuth:t,candidate:!1}),Object(l.jsx)(k,{path:"/signcontract/:candidate/:contract",Component:z,isAuth:t}),Object(l.jsx)(j,{})]})]})};s.a.render(Object(l.jsx)(W,{}),document.getElementById("root"))}},[[218,1,2]]]);
//# sourceMappingURL=main.80d7f563.chunk.js.map